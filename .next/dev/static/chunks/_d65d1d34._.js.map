{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/abhishek/niroshaorg/src/components/GoogleTagManager.jsx"],"sourcesContent":["'use client'\n\nimport React, { useEffect, useRef } from 'react'\nimport Script from 'next/script'\n\nconst GoogleTagManager = ({ gtmId, consentGranted }) => {\n  const scriptLoadedRef = useRef(false)\n  const consentInitializedRef = useRef(false)\n\n  // Initialize dataLayer only once\n  useEffect(() => {\n    if (typeof window === 'undefined') return\n    \n    // Initialize dataLayer before GTM loads\n    window.dataLayer = window.dataLayer || []\n    \n    // Initialize consent mode with default 'denied' state only once\n    if (!consentInitializedRef.current) {\n      window.dataLayer.push({\n        'consent': 'default',\n        'analytics_storage': 'denied',\n        'ad_storage': 'denied',\n        'wait_for_update': 500,\n      })\n      consentInitializedRef.current = true\n    }\n  }, [])\n\n  // Update consent when user makes a choice\n  useEffect(() => {\n    if (!gtmId || typeof window === 'undefined' || !window.dataLayer) return\n\n    // Only update if consent has changed and script is loaded\n    if (scriptLoadedRef.current) {\n      window.dataLayer.push({\n        'event': 'consent_update',\n        'analytics_storage': consentGranted ? 'granted' : 'denied',\n        'ad_storage': consentGranted ? 'granted' : 'denied',\n      })\n    }\n  }, [gtmId, consentGranted])\n\n  // Only load GTM if consent is granted\n  if (!gtmId || !consentGranted) return null\n\n  return (\n    <>\n      {/* GTM Script - Load lazily only after consent is granted */}\n      <Script\n        id=\"gtm-script\"\n        strategy=\"lazyOnload\"\n        onLoad={() => {\n          scriptLoadedRef.current = true\n        }}\n        dangerouslySetInnerHTML={{\n          __html: `\n            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n            })(window,document,'script','dataLayer','${gtmId}');\n          `,\n        }}\n      />\n      {/* GTM Noscript fallback - only show if consent granted */}\n      <noscript>\n        <iframe\n          src={`https://www.googletagmanager.com/ns.html?id=${gtmId}`}\n          height=\"0\"\n          width=\"0\"\n          style={{ display: 'none', visibility: 'hidden' }}\n        />\n      </noscript>\n    </>\n  )\n}\n\nexport default GoogleTagManager\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKA,MAAM,mBAAmB,CAAC,EAAE,KAAK,EAAE,cAAc,EAAE;;IACjD,MAAM,kBAAkB,IAAA,uKAAM,EAAC;IAC/B,MAAM,wBAAwB,IAAA,uKAAM,EAAC;IAErC,iCAAiC;IACjC,IAAA,0KAAS;sCAAC;YACR;;YAEA,wCAAwC;YACxC,OAAO,SAAS,GAAG,OAAO,SAAS,IAAI,EAAE;YAEzC,gEAAgE;YAChE,IAAI,CAAC,sBAAsB,OAAO,EAAE;gBAClC,OAAO,SAAS,CAAC,IAAI,CAAC;oBACpB,WAAW;oBACX,qBAAqB;oBACrB,cAAc;oBACd,mBAAmB;gBACrB;gBACA,sBAAsB,OAAO,GAAG;YAClC;QACF;qCAAG,EAAE;IAEL,0CAA0C;IAC1C,IAAA,0KAAS;sCAAC;YACR,IAAI,CAAC,SAAS,+CAAkB,eAAe,CAAC,OAAO,SAAS,EAAE;YAElE,0DAA0D;YAC1D,IAAI,gBAAgB,OAAO,EAAE;gBAC3B,OAAO,SAAS,CAAC,IAAI,CAAC;oBACpB,SAAS;oBACT,qBAAqB,iBAAiB,YAAY;oBAClD,cAAc,iBAAiB,YAAY;gBAC7C;YACF;QACF;qCAAG;QAAC;QAAO;KAAe;IAE1B,sCAAsC;IACtC,IAAI,CAAC,SAAS,CAAC,gBAAgB,OAAO;IAEtC,qBACE;;0BAEE,6LAAC,4IAAM;gBACL,IAAG;gBACH,UAAS;gBACT,QAAQ;oBACN,gBAAgB,OAAO,GAAG;gBAC5B;gBACA,yBAAyB;oBACvB,QAAQ,CAAC;;;;;qDAKkC,EAAE,MAAM;UACnD,CAAC;gBACH;;;;;;0BAGF,6LAAC;0BACC,cAAA,6LAAC;oBACC,KAAK,CAAC,4CAA4C,EAAE,OAAO;oBAC3D,QAAO;oBACP,OAAM;oBACN,OAAO;wBAAE,SAAS;wBAAQ,YAAY;oBAAS;;;;;;;;;;;;;AAKzD;GAtEM;KAAA;uCAwES"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/abhishek/niroshaorg/node_modules/next/script.js"],"sourcesContent":["module.exports = require('./dist/client/script')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}